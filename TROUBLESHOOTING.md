# éƒ¨ç½²æ•…éšœæ’é™¤æŒ‡å—

## ğŸš¨ å½“å‰é—®é¢˜ï¼šWranglerå…¥å£ç‚¹é”™è¯¯

### é—®é¢˜æè¿°
```
âœ˜ [ERROR] Missing entry-point to Worker script or to assets directory
```

### åŸå› åˆ†æ
1. **Wranglerç‰ˆæœ¬ä¸åŒ¹é…**ï¼šæ„å»ºç¯å¢ƒä½¿ç”¨v3.114.9ï¼Œé¡¹ç›®é…ç½®ä¸ºv4.33.1
2. **é…ç½®ç¼“å­˜é—®é¢˜**ï¼šæ„å»ºç¯å¢ƒå¯èƒ½ä½¿ç”¨äº†ç¼“å­˜çš„æ—§é…ç½®
3. **ä¾èµ–ç‰ˆæœ¬å†²çª**ï¼šnpmå’Œyarnç‰ˆæœ¬ä¸ä¸€è‡´

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šå¼ºåˆ¶æŒ‡å®šå…¥å£ç‚¹ï¼ˆæ¨èï¼‰

åœ¨éƒ¨ç½²å‘½ä»¤ä¸­ç›´æ¥æŒ‡å®šå…¥å£ç‚¹ï¼š

```bash
# æ–¹æ³•1ï¼šç›´æ¥æŒ‡å®šæ–‡ä»¶
npx wrangler deploy src/index.js --env production

# æ–¹æ³•2ï¼šæŒ‡å®šç‰ˆæœ¬å¹¶æŒ‡å®šæ–‡ä»¶
npx wrangler@4 deploy src/index.js --env production

# æ–¹æ³•3ï¼šä½¿ç”¨é¡¹ç›®è„šæœ¬
npm run deploy:direct
```

### æ–¹æ¡ˆ2ï¼šæ¸…ç†å¹¶é‡æ–°å®‰è£…ä¾èµ–

```bash
# æ¸…ç†ç¼“å­˜
npm cache clean --force
yarn cache clean

# åˆ é™¤node_modules
rm -rf node_modules

# é‡æ–°å®‰è£…
npm install
# æˆ–è€…
yarn install
```

### æ–¹æ¡ˆ3ï¼šä½¿ç”¨å…¼å®¹æ€§é…ç½®

å¦‚æœæ„å»ºç¯å¢ƒå¼ºåˆ¶ä½¿ç”¨Wrangler v3ï¼Œå¯ä»¥ï¼š

1. **é™çº§wranglerç‰ˆæœ¬**ï¼š
   ```bash
   npm install --save-dev wrangler@^3.36.0
   ```

2. **ä¿®æ”¹wrangler.toml**ï¼š
   ```toml
   # ç§»é™¤v4ç‰¹æœ‰é…ç½®
   # compatibility_flags = ["nodejs_compat"]
   ```

## ğŸ” è¯Šæ–­æ­¥éª¤

### 1. è¿è¡ŒéªŒè¯è„šæœ¬

```bash
# åŸºç¡€éªŒè¯
npm run verify

# Workersä¸“ç”¨éªŒè¯
npm run verify:worker
```

### 2. æ£€æŸ¥é…ç½®æ–‡ä»¶

ç¡®è®¤ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ä¸”é…ç½®æ­£ç¡®ï¼š
- âœ… `src/index.js` - æºä»£ç æ–‡ä»¶
- âœ… `wrangler.toml` - åŒ…å« `main = "src/index.js"`
- âœ… `package.json` - æ­£ç¡®çš„ä¾èµ–ç‰ˆæœ¬

### 3. æ£€æŸ¥æ„å»ºç¯å¢ƒ

```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version

# æ£€æŸ¥npmç‰ˆæœ¬
npm --version

# æ£€æŸ¥Wranglerç‰ˆæœ¬
npx wrangler --version
```

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] è¿è¡Œ `npm run verify:worker` éªŒè¯é…ç½®
- [ ] ç¡®è®¤ `wrangler.toml` åŒ…å« `main = "src/index.js"`
- [ ] æ£€æŸ¥Wranglerç‰ˆæœ¬å…¼å®¹æ€§
- [ ] éªŒè¯ç¯å¢ƒå˜é‡é…ç½®
- [ ] æµ‹è¯•æœ¬åœ°å¼€å‘ç¯å¢ƒ

## ğŸš€ å¿«é€Ÿéƒ¨ç½²å‘½ä»¤

### å¼€å‘ç¯å¢ƒæµ‹è¯•
```bash
npm run dev
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# æ–¹æ³•1ï¼šç›´æ¥éƒ¨ç½²
npx wrangler deploy src/index.js --env production

# æ–¹æ³•2ï¼šä½¿ç”¨è„šæœ¬
npm run deploy:direct

# æ–¹æ³•3ï¼šæŒ‡å®šç‰ˆæœ¬
npx wrangler@4 deploy src/index.js --env production
```

### æµ‹è¯•ç¯å¢ƒéƒ¨ç½²
```bash
npx wrangler deploy src/index.js --env staging
```

## ğŸ› å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### é”™è¯¯1ï¼šMissing entry-point
**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨éƒ¨ç½²å‘½ä»¤ä¸­æŒ‡å®š `src/index.js`

### é”™è¯¯2ï¼šWranglerç‰ˆæœ¬è¿‡æ—§
**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `npx wrangler@4` æˆ–å‡çº§ä¾èµ–

### é”™è¯¯3ï¼šé…ç½®è¯»å–å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥ `wrangler.toml` è¯­æ³•å’Œè·¯å¾„

### é”™è¯¯4ï¼šç¯å¢ƒå˜é‡æœªå®šä¹‰
**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®è®¤ç¯å¢ƒé…ç½®æ­£ç¡®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼š

1. **è¿è¡Œè¯Šæ–­è„šæœ¬**ï¼š`npm run verify:worker`
2. **æ£€æŸ¥æ„å»ºæ—¥å¿—**ï¼šæŸ¥çœ‹å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
3. **éªŒè¯é…ç½®æ–‡ä»¶**ï¼šç¡®è®¤æ‰€æœ‰é…ç½®é¡¹æ­£ç¡®
4. **æµ‹è¯•æœ¬åœ°ç¯å¢ƒ**ï¼šå…ˆç¡®ä¿æœ¬åœ°èƒ½æ­£å¸¸è¿è¡Œ

## ğŸ”„ æ›´æ–°æ—¥å¿—

### 2025-08-29 v2
- æ·»åŠ äº†ä¸“é—¨çš„Workersæ„å»ºéªŒè¯è„šæœ¬
- åˆ›å»ºäº†éƒ¨ç½²æ•…éšœæ’é™¤æŒ‡å—
- æä¾›äº†å¤šç§éƒ¨ç½²æ–¹æ³•
- å¢å¼ºäº†é…ç½®éªŒè¯åŠŸèƒ½ 